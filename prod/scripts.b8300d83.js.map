{"version":3,"sources":["scripts/utilities.js","scripts/loadHTML.js","scripts/uploadImages.js","scripts/makeCollageImages.js","scripts/float.js","scripts/drag.js","scripts/edit.js","scripts/index.js"],"names":["setCollageCss","Promise","resolve","reject","loadingDock_wrapper","style","display","loadingDock_selectWrapper","createCollageBtn","collageWrapper","opacity","isFullscreen","handleFullscreen","document","getElementsByTagName","classList","add","remove","removeAttribute","innerHTML","loadingGif","LOAD_HTML","helpModal","UPLOAD","bgClass","numImgsToLoad","numImgsRendered","allImgsRendered","numTransitionsDone","incNumTransitions","startImgRender","requestAnimationFrame","imgRendered","userImages","input","curFiles","querySelector","files","length","addEventListener","file","newImg","createElement","onload","src","URL","createObjectURL","offscreenImgLoader","appendChild","selectImagesBtn","value","isCollagePrepDone","removeEventListener","MAKE_IMGS","setDir","dir","getRndInteger","min","max","Math","floor","random","collageImages","imgsCollection","newWidth","newHeight","Array","from","children","forEach","img","i","id","className","aspectRatio","naturalWidth","naturalHeight","window","innerWidth","innerHeight","width","height","top","setRndTop","posY","$","left","setRndLeft","posX","zIndex","setAttribute","FLOAT","boxWidth","floaters","timer","screen","boxHeight","speedX","speedY","float","floater","Number","slice","handleCollisions","nextLeft","nextTop","nextRight","nextBottom","dirX","dirY","contains","parseInt","getAttribute","startFloating","querySelectorAll","setInterval","stopFloating","clearInterval","DRAG","activeItem","active","isFrozen","dragStart","e","ctrlKey","preventDefault","target","currentTarget","xOffset","yOffset","initialX","clientX","initialY","clientY","drag","setTranslate","xPos","yPos","currentX","currentY","transform","dragEnd","updateImg","targ","offsetX","offsetY","EDIT","collageItems","scale","sizeCount","zCount","fadeCount","newLeft","newTop","initEdit","getElementById","handleEditListeners","keyCode","which","setSize","setZ","setOpacity","initWidth","initHeight","initLeft","initTop","deltaY","targZ","targOpacity","isFloating","togFloating","addListenersToImgs","shiftKey","toggle","checkUploadsDone","allDone","then","setTimeout","loadEventListeners","click","UTIL","fullscreen","requestFullscreen"],"mappings":"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","file":"scripts.b8300d83.js","sourceRoot":"..\\src","sourcesContent":["\r\nfunction setCollageCss(){\r\n  return new Promise(function(resolve, reject){\r\n    loadingDock_wrapper.style.display = 'none';\r\n    loadingDock_selectWrapper.style.display = 'none';\r\n    createCollageBtn.style.display = 'none';\r\n    collageWrapper.style.opacity = 1;\r\n\r\n    resolve();\r\n  });\r\n}\r\n\r\nlet isFullscreen = 0;\r\nfunction handleFullscreen(){\r\n  return new Promise(function(resolve, reject){\r\n    let bgClass = \"bg-black\";\r\n\r\n    // If now in fullscreen -> Reset the UI\r\n    if (isFullscreen % 2 == 0) {\r\n      \r\n      // Reset CSS\r\n      document.getElementsByTagName('body')[0].classList.add(bgClass);\r\n      loadingDock_wrapper.classList.remove(\"loadingDock_transition\");\r\n      loadingDock_wrapper.removeAttribute(\"style\");\r\n      loadingDock_selectWrapper.removeAttribute(\"style\");\r\n      createCollageBtn.removeAttribute(\"style\");\r\n\r\n    } else if (!isFullscreen % 2 == 0) {\r\n      // Remove collage images\r\n      collageWrapper.innerHTML = \"\";\r\n\r\n      // Update css\r\n      collageWrapper.removeAttribute(\"style\");\r\n      loadingGif.style.display = \"none\";\r\n    }\r\n    isFullscreen += 1;\r\n\r\n    resolve();\r\n  });\r\n}\r\n\r\n\r\nexport { setCollageCss, handleFullscreen };\r\n\r\n\r\n// function updateImg(targ, width, height, left, top){\r\n  // console.log('updateImg() called : ', );\r\n  // targ.style.width = width + \"px\";\r\n  // targ.style.height = height + \"px\";\r\n  // targ.style.left = left + \"px\";\r\n  // targ.style.top = top + \"px\";\r\n  // targ.style.transform = \"\";\r\n// }\r\n","\r\nimport fs from 'fs';\r\n\r\nconst LOAD_HTML = function(){\r\n\r\n  return new Promise(function(resolve, reject){\r\n    const _helpModal = fs.readFileSync(__dirname + '/../_markUp/helpModal.html', 'utf8');\r\n    helpModal.innerHTML = _helpModal;\r\n    resolve();\r\n  });\r\n}\r\n\r\nexport { LOAD_HTML };","\r\n// Upload Controller\r\nconst UPLOAD = (function(){\r\n\r\n  // PRIVATE \r\n    let bgClass = \"bg-black\";\r\n    let numImgsToLoad = null;\r\n    let numImgsRendered = null;\r\n    let allImgsRendered = false;\r\n    let numTransitionsDone = 0;\r\n\r\n    document.getElementsByTagName('body')[0].classList.add(bgClass);\r\n\r\n    const incNumTransitions = () => {\r\n      numTransitionsDone += 1;\r\n    };\r\n\r\n    // Handle offscreen rendering of uploaded images\r\n    const renderImg = () => {\r\n      // each <img>'s onload() initiates it's rendering process\r\n      requestAnimationFrame(startImgRender);\r\n    }\r\n    const startImgRender = () => {\r\n      // Next frame\r\n      requestAnimationFrame(imgRendered);\r\n    }\r\n    const imgRendered = () => {\r\n      numImgsRendered += 1;\r\n\r\n      // If all the <img>s have been rendered\r\n      if (numImgsRendered === numImgsToLoad) {\r\n        // Reset counters\r\n        numImgsToLoad = null;\r\n        numImgsRendered = null;\r\n\r\n        // Update rendering status\r\n        allImgsRendered = true;\r\n      }\r\n  }\r\n\r\n  // PUBLIC _________________________________________________________\r\n  return {\r\n    userImages: function (){\r\n\r\n      return new Promise(function(resolve, reject){\r\n        const input = document.querySelector(\"#selectImagesBtn\");\r\n        const curFiles = input.files;\r\n        numImgsToLoad = curFiles.length;\r\n\r\n        // Handle css\r\n        loadingDock_selectWrapper.style.display = \"none\";\r\n        loadingGif.style.display = \"block\";\r\n        loadingDock_wrapper.classList.add(\"loadingDock_transition\");\r\n\r\n        // Start listeners\r\n        loadingDock_wrapper.addEventListener(\"transitionend\", incNumTransitions);\r\n\r\n        // Upload & append user images ->\r\n        for (const file of curFiles) {\r\n          // Create a new image element\r\n          const newImg = document.createElement(\"img\");\r\n\r\n          // Handle image rendering delays\r\n          newImg.onload = function () {\r\n            renderImg();\r\n          };\r\n\r\n          // Add the current file as the <img>.src attribute\r\n          newImg.src = URL.createObjectURL(file);\r\n\r\n          // Append the new image to an offscreen div\r\n          offscreenImgLoader.appendChild(newImg);\r\n        }\r\n        // Clear selectImagesBtn\r\n        selectImagesBtn.value = \"\"; \r\n      });\r\n    },\r\n\r\n    // Are all uploads rendered & css transitions done?\r\n    isCollagePrepDone: function() {\r\n\r\n      // If transitions done\r\n      if (numTransitionsDone === 4) {\r\n        // Stop listening for transitions\r\n        loadingDock_wrapper.removeEventListener(\"transitionend\", incNumTransitions);\r\n\r\n        // Update body bg color\r\n        document.getElementsByTagName('body')[0].classList.add(bgClass);\r\n      }\r\n\r\n      // If transitions done && all imgs are rendered\r\n      if (numTransitionsDone === 4 && allImgsRendered) {\r\n        // Reset Vars\r\n        numImgsToLoad = null;\r\n        numImgsRendered = null;\r\n        allImgsRendered = false;\r\n        numTransitionsDone = 0;\r\n\r\n        // Update css\r\n        createCollageBtn.style.display = \"inline-block\";\r\n        loadingGif.style.display = \"none\";\r\n\r\n        return true;\r\n      } \r\n    }\r\n  }\r\n})();\r\n\r\nexport { UPLOAD };\r\n","\r\n// Collage-image-maker Controller\r\nconst MAKE_IMGS = (function(){\r\n\r\n  // PRIVATE \r\n    function setRndTop(height){\r\n      let posY = getRndInteger(1, $(window).height() * .75);\r\n\r\n      // Keep running setRndTop()until the <img> fits on the screen\r\n      if(posY + height < $(window).height()-10){\r\n        return posY;\r\n      } else{\r\n        setRndTop(height);\r\n      }\r\n    }\r\n\r\n    function setRndLeft(width){\r\n      let posX = getRndInteger(1, $(window).width() * .75);\r\n\r\n      // Keep running setRndleft() until the <img> fits on the screen\r\n      if(posX + width < $(window).width()-10){\r\n        return posX;\r\n      } else{\r\n        setRndLeft(width);\r\n      }\r\n    }\r\n\r\n    function setDir(){\r\n      let dir = getRndInteger(1, 2);\r\n      if (dir === 1) { return \"1\"; } \r\n      else { return \"-1\"; }\r\n    }\r\n\r\n    function getRndInteger(min, max){\r\n      return Math.floor(Math.random() * (max - min + 1) ) + min;\r\n  }\r\n\r\n  // PUBLIC _________________________________________________________\r\n  return {\r\n    collageImages: function(){\r\n      return new Promise(function(resolve, reject){\r\n        \r\n        const imgsCollection = Array.from(offscreenImgLoader.children);\r\n        let newWidth;\r\n        let newHeight;\r\n        \r\n        // Configure & append the <img.floater>s\r\n        imgsCollection.forEach(function(img, i){\r\n\r\n          // Set attributes\r\n          img.id = i;\r\n          img.className = 'floater canMove';\r\n        \r\n          // Handle large images\r\n          const aspectRatio = img.naturalWidth / img.naturalHeight;\r\n          if(img.naturalWidth >= img.naturalHeight){\r\n            if(img.naturalWidth > window.innerWidth / 3){\r\n              newWidth = window.innerWidth / 3;\r\n              newHeight = newWidth / aspectRatio;\r\n            } else {\r\n              newWidth = img.naturalWidth;\r\n              newHeight = img.naturalHeight;\r\n            }\r\n          } else {\r\n            if(img.naturalHeight > window.innerHeight / 2){\r\n              newHeight = window.innerHeight / 2;\r\n              newWidth = newHeight * aspectRatio;\r\n            } else {\r\n              newWidth = img.naturalWidth;\r\n              newHeight = img.naturalHeight;\r\n            }\r\n          }\r\n\r\n          // Set CSS\r\n          img.style.width   = newWidth + 'px';\r\n          img.style.height  = newHeight + 'px';\r\n          img.style.top     = setRndTop(newHeight) + 'px';\r\n          img.style.left    = setRndLeft(newWidth) + 'px';\r\n          img.style.opacity = .99;\r\n          img.style.zIndex  = 1;\r\n\r\n          // Set data\r\n          img.setAttribute(\"data-dx\", setDir());\r\n          img.setAttribute(\"data-dy\", setDir());\r\n          \r\n          // Append <img>\r\n          collageWrapper.appendChild(img);\r\n        });\r\n        resolve();\r\n      });\r\n    }\r\n  }\r\n})();\r\n\r\nexport { MAKE_IMGS };\r\n","\r\n// Float Controller\r\nconst FLOAT = (function(){\r\n\r\n  // PRIVATE \r\n    const boxWidth = screen.width;\r\n    const boxHeight = screen.height;\r\n    const speedX = .25;\r\n    const speedY = .5;\r\n    let floaters;\r\n    let timer;\r\n\r\n    function floatInterval(){ timer = setInterval(float, 15); }\r\n\r\n    function float(){\r\n      floaters.forEach(function(floater){\r\n        let posX = Number(floater.style.left.slice(0, -2));\r\n        let posY = Number(floater.style.top.slice(0, -2));\r\n        let nextLeft = posX + dirX(floater) * speedX;\r\n        let nextTop = posY + dirY(floater) * speedY;\r\n\r\n        handleCollisions(floater, nextLeft, nextTop);\r\n\r\n        posX += dirX(floater) * speedX;\r\n        posY += dirY(floater) * speedY;\r\n\r\n        if(!floater.classList.contains(\"isSelected\") && floater.classList.contains(\"canMove\")){\r\n          floater.style.left = posX + 'px';\r\n          floater.style.top = posY + 'px';\r\n        }\r\n      });\r\n    }\r\n\r\n    function handleCollisions(floater, nextLeft, nextTop){\r\n      let nextRight = nextLeft + Number(floater.style.width.slice(0, -2));\r\n      let nextBottom = nextTop + Number(floater.style.height.slice(0, -2));\r\n\r\n      // X-AXIS - If floater's about to go out-of-bounds on the x-axis\r\n      if(nextLeft <= 0 || nextRight >= boxWidth){\r\n        // Reverse its direction of movement on the x-axis\r\n        if(dirX(floater) < 0){\r\n          // Start moving to the right\r\n          floater.setAttribute(\"data-dx\", \"1\");\r\n        } else{\r\n          // Start moving to the left\r\n          floater.setAttribute(\"data-dx\", \"-1\");\r\n        }\r\n      }\r\n\r\n      // Y-AXIS - If floater's about to go out-of-bounds on the y-axis\r\n      if(nextTop <= 0 || nextBottom >= boxHeight){\r\n        // Reverse its direction of movement on the y-axis\r\n        if(dirY(floater) < 0){\r\n          floater.setAttribute(\"data-dy\", \"1\");\r\n        } else{\r\n          floater.setAttribute(\"data-dy\", \"-1\");\r\n        }\r\n      }\r\n    }\r\n\r\n    function dirX(floater){return parseInt(floater.getAttribute(\"data-dx\"));}\r\n    function dirY(floater){return parseInt(floater.getAttribute(\"data-dy\"));\r\n  }\r\n\r\n  // PUBLIC _________________________________________________________\r\n  return {\r\n    startFloating: function(){\r\n      floaters = document.querySelectorAll('.floater');\r\n      floatInterval();\r\n    },\r\n    stopFloating: function(){ clearInterval(timer); }\r\n  }\r\n})();\r\n\r\nexport { FLOAT }\r\n","// Ref: https://www.kirupa.com/html5/drag.htm\r\n\r\n// Drag Controller\r\nconst DRAG = (function(){\r\n\r\n  // PRIVATE \r\n  let activeItem = null;\r\n  let active = false;\r\n  let isFrozen = null;\r\n  \r\n  function setTranslate(xPos, yPos, el) {\r\n    el.style.transform = \"translate3d(\" + xPos + \"px, \" + yPos + \"px, 0)\";\r\n  }\r\n\r\n  function updateImg(targ, width, height, left, top) {\r\n    targ.style.width = width + \"px\";\r\n    targ.style.height = height + \"px\";\r\n    targ.style.left = left + \"px\";\r\n    targ.style.top = top + \"px\";\r\n    targ.style.transform = \"\";\r\n  }\r\n\r\n  // PUBLIC _________________________________________________________\r\n  return{ \r\n\r\n    dragStart: function(e) {\r\n      if (!e.ctrlKey) { return; }\r\n      else {\r\n      \r\n        // Allow drop anywhere in #collageWrapper;\r\n        e.preventDefault();\r\n  \r\n        // Clear the isFrozen var\r\n        isFrozen = null;\r\n  \r\n        // If the user has clicked on a floating <img>\r\n        if (e.target !== e.currentTarget) {\r\n  \r\n          // Enable dragging stuff\r\n          active = true;\r\n  \r\n          // Get/Set the clicked <img>\r\n          activeItem = e.target;\r\n  \r\n          if (activeItem !== null) {\r\n  \r\n            // Clear the offset\r\n            activeItem.xOffset = 0;\r\n            activeItem.yOffset = 0;\r\n            \r\n            // Set the offset\r\n            activeItem.initialX = e.clientX - activeItem.xOffset;\r\n            activeItem.initialY = e.clientY - activeItem.yOffset;\r\n  \r\n            // Get 'canMove' state => Set 'isFrozen' bool\r\n            activeItem.classList.contains(\"canMove\") ?\r\n            isFrozen = false:\r\n            isFrozen = true;\r\n  \r\n            // Disable floating action\r\n            activeItem.classList.remove(\"canMove\");\r\n          }\r\n        }\r\n      }\r\n    },\r\n    drag: function(e) {\r\n      if (!e.ctrlKey) { return; } \r\n      else {\r\n        if (active) {\r\n          \r\n          activeItem.currentX = e.clientX - activeItem.initialX;\r\n          activeItem.currentY = e.clientY - activeItem.initialY;\r\n  \r\n          activeItem.xOffset = activeItem.currentX;\r\n          activeItem.yOffset = activeItem.currentY;\r\n  \r\n          setTranslate(activeItem.currentX, activeItem.currentY, activeItem);\r\n        }\r\n      }\r\n    },\r\n    dragEnd: function(e) {\r\n      if (!e.ctrlKey) { return; } \r\n      else {\r\n        // Update the <img>\r\n        if (activeItem !== null) {\r\n  \r\n          updateImg(activeItem, activeItem.style.width, \r\n          activeItem.style.height, e.clientX - e.offsetX, \r\n          e.clientY - e.offsetY); // (targ, width, height, left, top)\r\n  \r\n          // Clear the transform values created during the drag\r\n          activeItem.style.transform = \"unset\";\r\n  \r\n          // Re-enable the floating action - that was disabled in dragStart\r\n          activeItem.classList.add(\"canMove\");\r\n  \r\n          // If <img> was NOT moving at dragStart -> Disable floating action\r\n          if(isFrozen === true){\r\n            activeItem.classList.remove(\"canMove\");\r\n          }\r\n  \r\n          // If <img> was already selected for editing at dragStart\r\n          if(activeItem.classList.contains(\"isSelected\")){\r\n            // Disable 'isSelected'\r\n            activeItem.classList.remove(\"isSelected\");\r\n          }\r\n        }\r\n        \r\n        // Reset the drag-n-drop function\r\n        activeItem = null;\r\n        active = false;\r\n      }\r\n    }\r\n  }\r\n\r\n})();\r\n\r\nexport { DRAG };","\r\n// Image Editing Controller\r\nconst EDIT = (function(){\r\n  \r\n  // PRIVATE \r\n  const collageItems = collageWrapper.children;\r\n  \r\n  let targ;\r\n  let scale;\r\n\r\n  let sizeCount;\r\n  let zCount;\r\n  let fadeCount;\r\n\r\n  let newLeft   = null;\r\n  let newTop    = null;\r\n  let newWidth  = null;\r\n  let newHeight = null;\r\n\r\n  function updateImg(targ, width, height, left, top) {\r\n    targ.style.width = width + \"px\";\r\n    targ.style.height = height + \"px\";\r\n    targ.style.left = left + \"px\";\r\n    targ.style.top = top + \"px\";\r\n    targ.style.transform = \"\";\r\n  }\r\n\r\n  // PUBLIC _________________________________________________________\r\n  return {\r\n    initEdit: function(e){\r\n      targ = e;\r\n      scale = 1;\r\n      sizeCount = 0;\r\n      zCount = 0;\r\n      fadeCount = 0;\r\n\r\n      // Enable/Disable editing on all <img>s\r\n      if(targ.classList.contains('isSelected')){\r\n        // De-select targ\r\n        targ.classList.remove('isSelected');\r\n      } else {\r\n        // De-select all\r\n        for(let i=0; i < collageItems.length; i++){\r\n          document.getElementById(collageItems[i].id).classList.remove('isSelected');\r\n        }\r\n        // Select targ\r\n        targ.classList.add('isSelected');\r\n      }\r\n\r\n      EDIT.handleEditListeners();\r\n    },\r\n    handleEditListeners: function(){\r\n\r\n      // Add mousewheel-event listeners for - size || z-index || opacity\r\n      document.addEventListener(\"keydown\", function(e){\r\n\r\n        // Edit size\r\n        if(e.keyCode == 83 || e.which == 83) { // 'S'\r\n          if(sizeCount === 0){\r\n            document.addEventListener('wheel', EDIT.setSize);\r\n          }\r\n          sizeCount += 1;\r\n        }\r\n\r\n        // Edit z-index\r\n        if(e.keyCode == 68 || e.which == 68) { // 'D'\r\n          // Display #displayOrderBtn\r\n          document.querySelector('#displayOrderBtn').style.display = 'block';\r\n\r\n          if(zCount === 0){\r\n            document.addEventListener('wheel', EDIT.setZ);\r\n          }\r\n          zCount += 1;\r\n        }\r\n\r\n        // Edit opacity\r\n        if(e.keyCode == 70 || e.which == 70) { // 'F'\r\n          if(fadeCount === 0){\r\n            document.addEventListener('wheel', EDIT.setOpacity);\r\n          }\r\n          fadeCount += 1;\r\n        }\r\n      });\r\n\r\n      // Remove all mousewheel listeners | Hide #displayOrderBtn | Handle resizing\r\n      document.addEventListener(\"keyup\", function(e){\r\n\r\n        // If any of the edit keys are released\r\n        if (e.keyCode == 83 || e.which == 83 || // 'S'\r\n          e.keyCode == 68 || e.which == 68 ||   // 'D'\r\n          e.keyCode == 70 || e.which == 70) {   // 'F'\r\n          \r\n          // Remove listeners\r\n          document.removeEventListener('wheel', EDIT.setSize);\r\n          document.removeEventListener('wheel', EDIT.setZ);\r\n          document.removeEventListener('wheel', EDIT.setOpacity);\r\n\r\n          // Reset count\r\n          sizeCount = 0;\r\n          fadeCount = 0;\r\n          zCount = 0;\r\n\r\n          // Hide #displayOrderBtn\r\n          document.querySelector('#displayOrderBtn').style.display = 'none';\r\n\r\n          // If 'S' key released -> Set <img>'s new size & position \r\n          if (e.keyCode == 83 || e.which == 83){ // 'S'\r\n            if(newWidth !== null){\r\n              updateImg(targ, newWidth, newHeight, newLeft, newTop);\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    setSize: function(e){\r\n      const initWidth = Number(targ.style.width.slice(0, -2));\r\n      const initHeight = Number(targ.style.height.slice(0, -2));\r\n      const initLeft = Number(targ.style.left.slice(0, -2));\r\n      const initTop = Number(targ.style.top.slice(0, -2));\r\n\r\n      scale += e.deltaY * 0.0005;\r\n    \r\n      // Restrict scale\r\n      scale = Math.min(Math.max(.125, scale), 4);\r\n    \r\n      // Apply scale transform\r\n      targ.style.transform = `scale(${scale})`;\r\n\r\n      // Update <img> css values\r\n      newWidth = initWidth * scale;\r\n      newHeight = initHeight * scale;\r\n      newLeft = initLeft - ((newWidth - initWidth) / 2);\r\n      newTop = initTop - ((newHeight - initHeight) / 2);\r\n    },\r\n    setZ: function(e){\r\n\r\n      // Get current\r\n      let targZ = parseInt(targ.style.zIndex);\r\n\r\n      // Set new\r\n      if (e.deltaY > 0) { targZ += 1; } \r\n      else {\r\n        if (!targZ - 1 < 0) { targZ -= 1; }\r\n      }\r\n    \r\n      // Apply new\r\n      targ.style.zIndex = targZ;\r\n\r\n      // Update #displayOrderBtn\r\n      document.querySelector('#displayOrderBtn > span').innerHTML = targZ;\r\n    },\r\n    setOpacity: function(e){\r\n\r\n      // Get current\r\n      let targOpacity = Number(targ.style.opacity);\r\n\r\n      // Set new\r\n      if (e.deltaY < 0){\r\n        if (targOpacity - .1 > 0) { targOpacity -= .1; }\r\n      } else {\r\n        if (targOpacity + .1 < 1) { targOpacity += .1; }\r\n      }\r\n    \r\n      // Apply new\r\n      targ.style.opacity = targOpacity;\r\n    },\r\n  }\r\n})();\r\n\r\nexport { EDIT };","\r\nimport '../styles/index.scss';\r\nimport * as UTIL from './utilities.js';\r\nimport { LOAD_HTML } from \"./loadHTML\";\r\nimport { UPLOAD } from \"./uploadImages\";\r\nimport { MAKE_IMGS } from \"./makeCollageImages\";\r\nimport { FLOAT } from \"./float\";\r\nimport { DRAG } from \"./drag\";\r\nimport { EDIT } from \"./edit\";\r\n\r\nlet isFloating;\r\nconst togFloating = function(){\r\n  if(isFloating){\r\n    FLOAT.stopFloating();\r\n    isFloating = false;\r\n  } else {\r\n    FLOAT.startFloating();\r\n    isFloating = true;\r\n  }\r\n}\r\n\r\nconst addListenersToImgs = function(){\r\n  return new Promise(function(resolve, reject){\r\n    const collageImgsCollection = Array.from(collageWrapper.children);\r\n\r\n    collageImgsCollection.forEach(function(img){\r\n      img.addEventListener('click', function(e){\r\n        if (!e.shiftKey && !e.ctrlKey) {\r\n          img.classList.toggle(\"canMove\");\r\n        } \r\n        \r\n        if (e.shiftKey) {\r\n          EDIT.initEdit(img);\r\n        }\r\n      });\r\n    });\r\n    \r\n    resolve();\r\n  });\r\n}\r\n// If uploads done => make & append collage images\r\n//  .then add event listeners to each new image\r\n//  .then start floating action for all\r\nconst checkUploadsDone = function(){\r\n  let allDone = false;\r\n\r\n  if (UPLOAD.isCollagePrepDone()){ allDone = true; }\r\n  \r\n  if (allDone){\r\n    MAKE_IMGS.collageImages() \r\n      .then(addListenersToImgs() )\r\n      .then(isFloating = true, togFloating() )\r\n    ; \r\n  } \r\n  else { setTimeout(function(){ checkUploadsDone(); }, 1000); }\r\n}\r\n\r\nconst loadEventListeners = function () {\r\n\r\n  // Handle non-editing hotkeys\r\n  document.addEventListener(\"keyup\",function (e) {\r\n\r\n    // Toggle Floating - < spacebar >\r\n    if (e.keyCode == 32 || e.which == 32) { togFloating(); }\r\n\r\n    // Show help modal - < h >\r\n    if (e.keyCode == 72 || e.which == 72) { document.getElementById(\"helpBtn\").click(); }\r\n  });\r\n\r\n  // Handle upload\r\n  selectImagesBtn.addEventListener(\"change\",function(){\r\n    UPLOAD.userImages() \r\n      .then(checkUploadsDone()); \r\n  });\r\n\r\n  // Create collage\r\n  createCollageBtn.addEventListener(\"click\",function(){ \r\n    UTIL.setCollageCss() \r\n      .then(fullscreen.requestFullscreen())\r\n    ; \r\n  });\r\n\r\n  // Handle fullscreen\r\n  document.addEventListener(\"fullscreenchange\",function(){\r\n    UTIL.handleFullscreen()\r\n      .then(togFloating)\r\n    ;\r\n  })\r\n\r\n  // Handle drag-n-drop\r\n  collageWrapper.addEventListener(\"mousedown\", DRAG.dragStart, false);\r\n  collageWrapper.addEventListener(\"mousemove\", DRAG.drag, false);\r\n  collageWrapper.addEventListener(\"mouseup\", DRAG.dragEnd, false);\r\n};\r\n\r\nLOAD_HTML() .then(loadEventListeners());\r\n"]}